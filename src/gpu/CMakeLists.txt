# gpu resources and interface

ADD_SPIRV_LIBRARY(
    TARGET vkr-gpu-resources
    NAMESPACE device_side
    GENERATED_HEADER_PATH "host-interface/autogenerated/main/GPUCodeResources.h"
    MACROS "VKR_DEVICE_SIDE"
    HEADERS "shared/device_compatibility.h" "shared/compatibility.h" "shared/triangle_setup_types.h" "Config.comph" "TriangleSetupUtil.comp"
    SOURCES "entrypoints/main/TriangleSetup.comp")

ADD_SPIRV_LIBRARY(
    TARGET vkr-gpu-test-resources
    NAMESPACE device_side
    GENERATED_HEADER_PATH "host-interface/autogenerated/GPUTestResources.h"
    MACROS "VKR_DEVICE_SIDE"
    HEADERS "shared/device_compatibility.h" "shared/compatibility.h" "shared/triangle_setup_types.h" "Config.comph" "TriangleSetupUtil.comp"
    SOURCES "entrypoints/tests/setup/Clipping.comp")
TARGET_INCLUDE_DIRECTORIES(vkr-gpu-test-resources INTERFACE "host-interface/autogenerated/tests")

ADD_LIBRARY(vkr-gpu
        host-interface/TriangleSetupAPI.cpp)

TARGET_LINK_LIBRARIES(vkr-gpu
    PRIVATE vkr-gpu-resources
    PRIVATE Vulkan::Vulkan
    INTERFACE vkr-global-compiler-opts)
